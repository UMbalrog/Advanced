<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>观察者模式</title>
</head>
<body>
  <script>
// 发布者 Dep
class Dep {
  constructor() {
    // 观察者列表
    this.subs = []
  }
  // 添加观察者方法
  addsubs(sub) {
    sub && sub.update && this.subs.push(sub)
  }
  // 事件触发调用观察者
  notify() {
    this.subs.forEach(sub => {
      sub.update();
    })
  }
}
// 观察者（订阅者）
class Watcher {
  update() {
    console.log('watcher_update')
  }
}

let dep = new Dep();
let wat = new Watcher();

dep.addsubs(wat);

setTimeout(() => {
  dep.notify();
},3000)
   
  </script>
</body>
</html>